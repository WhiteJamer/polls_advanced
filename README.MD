# API Для приложения с Опросами

## Технологии
- Python 3.8.2
- Django 2.2.10
- DRF 3.11.0

## Установка
#### Убедительная просьба использовать виртуальное окружение, во избежание конфликтов.

1. Склонируйте репозиторий.

2. Установите зависимости:

        pip install -r requirements.txt
    
3. Создайте суперпользователя:

        python manage.py createsuperuser
        
4. ...
5. PROFIT

## Документация к API

Участвовать в опросах могут авторизованные и анонимные пользователи, чтобы обращаться к API как авторизованный пользователь вам нужно получить Token. Для этого нужно авторизоваться или зарегистрироваться.
    
    POST /auth/login/
    POST /auth/register/
    
В `Body` нужно передать `username` и `password`.
Если пользователь с этими данными существует, вы получите токен.

    "token": "746f2906166bb19811225bb47c7f7eafb1ab80a2"
    
Для дальнейшего использования API как авторизованный пользователь нужно указывать в `headers`
заголовок `Authorization` с полученным токеном, таким образом:

    Token 746f2906166bb19811225bb47c7f7eafb1ab80a2
    
### Опросы.
Поля
- `name` - Название опроса
- `start_date` - Дата старта `default=now`
- `end_date` - Дата окончания
- `description` - Описание
- `is_active` - Активен ли опрос `default=False`
- `questions` - Вопросы
#### Получить все опросы:
   
    
    GET /polls/
Примечание: Все кроме администратора могут получить только опросы с полем `is_active=True`.

#### Получить конкретный опрос:

    GET /polls/<id>/
    
#### Добавить опрос (only Admin):
    POST /polls/create/
    
#### Изменить опрос
    PUT/PATCH /polls/<id>/update/
    
Примечание, после создания поле `is_active` менять нельзя

#### Удалить опрос
    DELETE /polls/<id>/destroy/
    
    
### Вопросы.

Поля
- `text` - Текст вопроса
- `type` - Тип вопроса `TEXT`/`ONE`/`MANY`
- `poll` - ID Опроса
- `choices` - варианты ответов

#### Получить все вопросы:
   
    
    GET /questions/
Примечание: Все кроме администратора могут получить только опросы с полем `is_active=True`.

#### Получить конкретный вопрос:

    GET /questions/<id>/
    
#### Добавить вопрос (only Admin):
    POST /questions/create/
    
#### Изменить вопрос
    PUT/PATCH /questions/<id>/update/
    
Примечание, после создания поле `is_active` менять нельзя

#### Удалить вопрос
    DELETE /questions/<id>/destroy/
    
#### Оставить ответ на вопрос.

    POST /<question_id>/vote/
    
Нужно передать в `Body` `owner_id` который служит уникальным ключом для пользователя.
Так же если тип вопроса `TEXT` нужно добавить `text:String`, а если тип вопроса `ONE` или `MANY` добавить `choices:Array` и поместить туда массив `choices ids`.

#### Получить все детальные ответы по уникальному ключу.
    
    GET /answers/user/<owner_id>
    
     


    


    



    

    
